<?xml version="1.0" encoding="UTF-8"?>
<config>

	<jobType>SimultaneousTPid</jobType>

	<SimultaneousPid>
		<Logger color="true" logLevel="all" globalLogLEvel="all"/>
		<Reporter> <output url="../products/param/11GeV/rpSgfTest.pdf" width="800" height="800" /> </Reporter>	
		<input> <data url="../products/phaseSpace/11GeV/pid_all_pt.root"/> </input>
		<output path="../products/param/11GeV/"> <data>fit.root</data> </output>
	
		<histograms>
			<Histo name="yield" title="yield" xBins="bin.pt" />
		</histograms>
		<!-- fit bins -->
		<FitRange>
			<ptBins min="0" max="20" />
			<centralityBins>0, 1, 2, 3, 4, 5, 6</centralityBins>
			<etaBins>0</etaBins>
			<charges>1</charges>
		</FitRange>


		<!-- Guiding parameters -->
		<ParameterFixing apply="false">
			<!-- mu can vary +/- nSigma -->
			<deltaMu zb="10.0" zd="10.0" />
			<!-- sigma can vary +/- n percent (between 0 and 1) -->
			<deltaSigma zb="0.90" zd="0.90" />

			<!-- the minimum momentum at which the value is fixed -->
			<Pi zbSigma="5.0" zdSigma="5.7" />
			<K zbSigma="5.0" zdSigma="5.7" />
			<P zbSigma="5.4" zdSigma="5.7" />

			
		</ParameterFixing>


		

		<Bichsel>
			<table>dedxBichsel.root</table>
			<method>0</method>
		</Bichsel>
		
		<PhaseSpaceRecentering>
			<centerSpecies>K</centerSpecies>
			<sigma tof="0.0115" dedx="0.033"/>
			<method>nonlinear</method>
		</PhaseSpaceRecentering>

		<FitSchema method="chi2" roi="-3.0">

			<!-- 1/beta -->
			<!-- Mus -->
			<FitVar name="zb_mu_Pi" value="-1.25"  min="-1.5" max="-1.0" error=".001"/>
			<FitVar name="zb_mu_K"  value="0.0"    min="-0.05" max="0.05" error=".001"/>
			<FitVar name="zb_mu_P"  value="1.25"    min="1.0" max="1.8" error=".01"/>
			<!-- Sigma -->
			<FitVar name="zb_sigma_Pi" value=".01" min="0.001" max=".11" error=".001"/>
			<FitVar name="zb_sigma_K" value=".01" min="0.001" max=".11" error=".001"/>
			<FitVar name="zb_sigma_P" value=".01" min="0.001" max=".11" error=".001"/>


			<!-- dEdx -->
			<!-- Mus -->
			<FitVar name="zd_mu_Pi" value="-0.6" error=".01" min="-0.8" max="-0.1" />
			<FitVar name="zd_mu_K" value="0.0" error=".01" min="-0.1" max="0.1" />
			<FitVar name="zd_mu_P" value="0.6" error=".01" min="0.25" max="0.8" />
			<!-- Sigma -->
			<FitVar name="zd_sigma_Pi" value=".03" error=".001" min=".001" max=".035" />
			<FitVar name="zd_sigma_K" value=".03" error=".001" min=".001" max=".035" />
			<FitVar name="zd_sigma_P" value=".03" error=".001" min=".001" max=".04" />

			<!-- 1/beta and dEdx shared yields -->
			<FitVar name="zb_yield_K" value="1000" error=".01"  min="0" max="10000000" />
			<FitVar name="zb_yield_Pi" value="10000" error="10" min="0" max="10000000" />
			<FitVar name="zb_yield_P" value="1000" error="10"   min="0" max="10000000" />

			<FitVar name="zd_yield_K" value="1000" error=".01"  min="0" max="10000000" />
			<FitVar name="zd_yield_Pi" value="10000" error="10" min="0" max="10000000" />
			<FitVar name="zd_yield_P" value="1000" error="10"   min="0" max="10000000" />

			
			<Model name="zb_Pi" dataset="zb_Pi" >
				<GaussModel name="gPi" mu="zb_mu_Pi" sigma="zb_sigma_Pi" yield="zb_yield_Pi" />
			</Model>
			<Model name="zb_K" dataset="zb_K" >
				<GaussModel name="gK" mu="zb_mu_K" sigma="zb_sigma_K" yield="zb_yield_K" />
			</Model>
			<Model name="zb_P" dataset="zb_P" >
				<GaussModel name="gP" mu="zb_mu_P" sigma="zb_sigma_P" yield="zb_yield_P" />
			</Model>

			<Model name="zd_K" dataset="zd_K" >
				<GaussModel name="gK" mu="zd_mu_K" sigma="zd_sigma_K" yield="zd_yield_K" />
			</Model>
			<Model name="zd_Pi" dataset="zd_Pi" >
				<GaussModel name="gPi" mu="zd_mu_Pi" sigma="zd_sigma_Pi" yield="zd_yield_Pi" />
			</Model>
			<Model name="zd_P" dataset="zd_P" >
				<GaussModel name="gP" mu="zd_mu_P" sigma="zd_sigma_P" yield="zd_yield_P" />
			</Model>

			
			
		</FitSchema>



	</SimultaneousPid>


	<bin hide="true" >
		
		<!-- Based on Evan's thesis.v5.pdf -->
		<!-- .1 from .5 to 2.5 => 15 bins -->
		<!-- .2 from 2.0 to 3.0 => 5 bins -->
		<pt>
			0.2, 0.25, 0.3, 0.35, 0.4, 0.45,
			0.5, 0.6, 0.7, 0.8, 0.9, 1.0, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9, 2.0, 
			2.2, 2.4, 2.6, 2.8, 3.0, 	
			3.5,						
			4.5
		</pt>
		
		<eta>0.0, 0.2, 0.4, 0.6 </eta>

		<charge> -1.5, -0.5, 0.5, 1.5 </charge>

		<tof width="0.006" min="-1" max="1" />
		<dedx width="0.03" min="-0.75" max="0.75" />
		<!--
		<tof width="0.006" min="-1" max="1" />
		<dedx width="0.015" min="-0.75" max="0.75" />
		-->
		<tofRaw width="0.0024" min="0.9" max="3" />
		<dedxRaw width="0.012" min="1" max="6" />

		<padding tof=".15" dedx=".15" tofScale="0.05" dedxScale="0.05" />

	</bin>
			

</config>
