<?xml version="1.0" encoding="UTF-8"?>
<config>

	<jobType>SimultaneousPid</jobType>

	<SimultaneousPid>
		<Logger color="true" logLevel="all"/>
		<Reporter> <output url="rpSgfTest.pdf" width="800" height="800" /> </Reporter>	
		<!--<input> <data url="/Users/danielbrandenburg/bnl/local/data/Run14/rcp/phaseSpace/pid.root"/> </input>-->
		<input> <data url="/Users/danielbrandenburg/bnl/local/data/Run14/rcp/phaseSpace/15GeV/pid_15GeV_04_09.root"/> </input>
		<output path=""> <data>sgf_test.root</data> </output>
	
		<histograms>
			<Histo name="yield" title="yield" xBins="bin.pt" />
		</histograms>
		<!-- fit bins -->
		<FitRange>
			<ptBins min="0" max="23" />
			<centralityBins>0, 6</centralityBins>
			<etaBins>0, 1, 2</etaBins>
			<charges>-1, 1</charges>
		</FitRange>
		<!-- Guiding parameters -->

		<ParameterFixing>
			<!-- mu can vary +/- nSigma -->
			<deltaMu zb="0.5" zd="0.5" />
			<!-- sigma can vary +/- n percent (between 0 and 1) -->
			<deltaSigma zb="0.25" zd="0.25" />

			<!-- the minimum momentum at which the value is fixed -->
			<Pi zbSigma="1.0" zdSigma="0.7" />
			<K zbSigma="1.2" zdSigma="0.7" />
			<P zbSigma="1.4" zdSigma="0.7" />

			
		</ParameterFixing>


		<TofPidParams>
			<Pi>
				<mean t="-0.00198432" p="1.52356" ep="-0.38614"/>
				<sigma t="0.010814" p="0.0" ep="0.0"/>
			</Pi>
			<K>
				<mean t="-0.00500018" p="-0.104294" ep="-0.000645172"/>
				<sigma t="0.0111527" p="0.102938" ep="0.00755773"/>
			</K>
			<P>
				<mean t="-0.0070094" p="-1.02106" ep="0.288474"/>
				<sigma t="0.0117997" p="-0.280521" ep="0.00997338"/>
			</P>
		</TofPidParams>
		<DedxPidParams>
			<Pi>
				<sigma p0="0.0300288" p1="0.0" p2="-0.0000218021" p3="0.00266491" />
			</Pi>
			<K>
				<sigma p0="0.0324423" p1="0" p2="0.000381861" p3="0.0117648"/>
			</K>
			<P>
				<sigma p0="0.031696" p1="0.00171583" p2="0.0000900753" p3="0.00561743"/>
			</P>
		</DedxPidParams>

		<Bichsel>
			<table>dedxBichsel.root</table>
			<method>0</method>
		</Bichsel>
		
		<PhaseSpaceRecentering>
			<centerSpecies>K</centerSpecies>
			<sigma tof="0.0115" dedx="0.033"/>
			<method>nonlinear</method>
		</PhaseSpaceRecentering>

		<SGFSchema>
			<!-- Yield Defaults -->
			<Yield Pi="10000" K="1000" P="1000" />

			<!-- Indep Vars -->
			<RooRealVar name="zb" min="-10.6" max="10.0" />
			<RooRealVar name="zd" min="-0.4" max="0.5" />

			<!-- 1/beta -->
			<!-- Mus -->
			<RooRealVar name="zb_mu_Pi" value="-0.5"  min="-0.6" max="-0.4" />
			<RooRealVar name="zb_mu_K"  value="0.0"    min="-0.1" max="0.1" />
			<RooRealVar name="zb_mu_P"  value="0.9"    min="0.7" max="1.1" />
			<!-- Sigma -->
			<RooRealVar name="zb_sigma_Pi" value=".1" min="0.001" max=".11" />
			<RooRealVar name="zb_sigma_K" value=".01" min="0.001" max=".11" />
			<RooRealVar name="zb_sigma_P" value=".1" min="0.001" max=".11" />

			<!-- dEdx -->
			<!-- Mus -->
			<RooRealVar name="zd_mu_Pi" value="-.3" min="-0.4" max="-0.2" />
			<RooRealVar name="zd_mu_K" value="0.0" min="-0.1" max="0.1" />
			<RooRealVar name="zd_mu_P" value=".34" min="0.2" max="0.5" />
			<!-- Sigma -->
			<RooRealVar name="zd_sigma_Pi" value=".01" min=".001" max=".2" />
			<RooRealVar name="zd_sigma_K" value=".01" min=".001" max=".035" />
			<RooRealVar name="zd_sigma_P" value=".01" min=".001" max=".2" />

			<!-- 1/beta and dEdx shared yields -->
			<RooRealVar name="yield_Pi" value="10000" min="10" max="100000000" />
			<RooRealVar name="yield_K" value="1000" min="10" max="1000000000" />
			<RooRealVar name="yield_P" value="1000" min="10" max="1000000000" />

			<!-- dEdx Kaon enhanced -->
			<RooRealVar name="zd_K_yield_Pi" value="100000" min="1" max="100000000" />
			<RooRealVar name="zd_K_yield_K" value="10000" min="10" max="1000000000" />
			<RooRealVar name="zd_K_yield_P" value="10000" min="1" max="1000000000" />	
			<!-- dEdx Pion enhanced -->
			<RooRealVar name="zd_Pi_yield_Pi" value="100000" min="10" max="100000000" />
			<RooRealVar name="zd_Pi_yield_K" value="10000" min="1" max="1000000000" />
			<RooRealVar name="zd_Pi_yield_P" value="10000" min="1" max="1000000000" />	
			<!-- dEdx Proton enhanced -->
			<RooRealVar name="zd_P_yield_Pi" value="100000" min="1" max="100000000" />
			<RooRealVar name="zd_P_yield_K" value="10000" min="1" max="1000000000" />
			<RooRealVar name="zd_P_yield_P" value="10000" min="10" max="1000000000" />	

			<!-- 1/beta Kaon enhanced -->
			<RooRealVar name="zb_K_yield_Pi" value="100000" min="1" max="100000000" />
			<RooRealVar name="zb_K_yield_K" value="10000" min="10" max="1000000000" />
			<RooRealVar name="zb_K_yield_P" value="10000" min="1" max="1000000000" />	
			<!-- 1/beta Pion enhanced -->
			<RooRealVar name="zb_Pi_yield_Pi" value="100000" min="10" max="100000000" />
			<RooRealVar name="zb_Pi_yield_K" value="10000" min="1" max="1000000000" />
			<RooRealVar name="zb_Pi_yield_P" value="10000" min="1" max="1000000000" />	
			<!-- 1/beta Proton enhanced -->
			<RooRealVar name="zb_P_yield_Pi" value="100000" min="1" max="100000000" />
			<RooRealVar name="zb_P_yield_K" value="10000" min="1" max="1000000000" />
			<RooRealVar name="zb_P_yield_P" value="10000" min="10" max="1000000000" />	


				<!-- Models -->
			<Model name="zb_All" sample="zb_All" >
				<RooGaussian name="gauss_Pi" var="zb" mu="zb_mu_Pi" sigma="zb_sigma_Pi" yield="yield_Pi" />
				<RooGaussian name="gauss_K" var="zb" mu="zb_mu_K" sigma="zb_sigma_K" yield="yield_K" />
				<RooGaussian name="gauss_P" var="zb" mu="zb_mu_P" sigma="zb_sigma_P" yield="yield_P" />
			</Model>
			<Model name="zd_All" sample="zd_All" >
				<RooGaussian name="gauss_Pi" var="zd" mu="zd_mu_Pi" sigma="zd_sigma_Pi" yield="yield_Pi" />
				<RooGaussian name="gauss_K" var="zd" mu="zd_mu_K" sigma="zd_sigma_K" yield="yield_K" />
				<RooGaussian name="gauss_P" var="zd" mu="zd_mu_P" sigma="zd_sigma_P" yield="yield_P" />
			</Model>

			<!-- dEdx distributions enhanced by 1/beta cuts -->
			<Model name="zd_K" sample="zd_K" >
				<RooGaussian name="gauss_Pi" var="zd" mu="zd_mu_Pi" sigma="zd_sigma_Pi" yield="zd_K_yield_Pi" />
				<RooGaussian name="gauss_K" var="zd" mu="zd_mu_K" sigma="zd_sigma_K" yield="zd_K_yield_K" />
				<RooGaussian name="gauss_P" var="zd" mu="zd_mu_P" sigma="zd_sigma_P" yield="zd_K_yield_P" />
			</Model>
			<Model name="zd_Pi" sample="zd_Pi" >
				<RooGaussian name="gauss_Pi" var="zd" mu="zd_mu_Pi" sigma="zd_sigma_Pi" yield="zd_Pi_yield_Pi" />
				<RooGaussian name="gauss_K" var="zd" mu="zd_mu_K" sigma="zd_sigma_K" yield="zd_Pi_yield_K" />
				<RooGaussian name="gauss_P" var="zd" mu="zd_mu_P" sigma="zd_sigma_P" yield="zd_Pi_yield_P" />
			</Model>
			<Model name="zd_P" sample="zd_P" >
				<RooGaussian name="gauss_Pi" var="zd" mu="zd_mu_Pi" sigma="zd_sigma_Pi" yield="zd_P_yield_Pi" />
				<RooGaussian name="gauss_K" var="zd" mu="zd_mu_K" sigma="zd_sigma_K" yield="zd_P_yield_K" />
				<RooGaussian name="gauss_P" var="zd" mu="zd_mu_P" sigma="zd_sigma_P" yield="zd_P_yield_P" />
			</Model>

			<!-- 1/beta distributions enhanced by dEdx cuts -->
			<Model name="zb_K" sample="zb_K" >
				<RooGaussian name="gauss_Pi" var="zb" mu="zb_mu_Pi" sigma="zb_sigma_Pi" yield="zb_K_yield_Pi" />
				<RooGaussian name="gauss_K" var="zb" mu="zb_mu_K" sigma="zb_sigma_K" yield="zb_K_yield_K" />
				<RooGaussian name="gauss_P" var="zb" mu="zb_mu_P" sigma="zb_sigma_P" yield="zb_K_yield_P" />
			</Model>
			<Model name="zb_Pi" sample="zb_Pi" >
				<RooGaussian name="gauss_Pi" var="zb" mu="zb_mu_Pi" sigma="zb_sigma_Pi" yield="zb_Pi_yield_Pi" />
				<RooGaussian name="gauss_K" var="zb" mu="zb_mu_K" sigma="zb_sigma_K" yield="zb_Pi_yield_K" />
				<RooGaussian name="gauss_P" var="zb" mu="zb_mu_P" sigma="zb_sigma_P" yield="zb_Pi_yield_P" />
			</Model>
			<Model name="zb_P" sample="zb_P" >
				<RooGaussian name="gauss_Pi" var="zb" mu="zb_mu_Pi" sigma="zb_sigma_Pi" yield="zb_P_yield_Pi" />
				<RooGaussian name="gauss_K" var="zb" mu="zb_mu_K" sigma="zb_sigma_K" yield="zb_P_yield_K" />
				<RooGaussian name="gauss_P" var="zb" mu="zb_mu_P" sigma="zb_sigma_P" yield="zb_P_yield_P" />
			</Model>
		</SGFSchema>



	</SimultaneousPid>


	<bin hide="true" >
		
		<!-- Based on Evan's thesis.v5.pdf -->
		<!-- .1 from .5 to 2.5 => 15 bins -->
		<!-- .2 from 2.0 to 3.0 => 5 bins -->
		<pt>
			0.5, 0.6, 0.7, 0.8, 0.9, 1.0, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9, 2.0, 
			2.2, 2.4, 2.6, 2.8, 3.0, 	
			3.4,						
			4.4,					
			5.0
		</pt>
		
		<eta>0.0, 0.2, 0.4, 0.5 </eta>

		<charge> -1.5, -0.5, 0.5, 1.5 </charge>

		<tof width="0.006" min="-1" max="1" />
		<dedx width="0.03" min="-0.75" max="0.75" />
		<!--
		<tof width="0.006" min="-1" max="1" />
		<dedx width="0.015" min="-0.75" max="0.75" />
		-->
		<tofRaw width="0.0024" min="0.9" max="3" />
		<dedxRaw width="0.012" min="1" max="6cd" />

		<padding tof=".15" dedx=".15" tofScale="0.05" dedxScale="0.05" />

	</bin>



</config>
